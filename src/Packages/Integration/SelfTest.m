myAnd[list_] := If[Count[list, 0] == 0, 1, 0]
myOr[list_] := If[Count[list, 1] > 0, 1, 0]
myXor[list_] := Mod[Total[list], 2]
allPosibleInputsReverse[noNodes_] := Table[Reverse[IntegerDigits[x, 2, noNodes]], {x, 0, 2^noNodes - 1, 1}]
runNetwork[cm_, dynamic_, input_] := Module[{noNodes, oneNetOutput, n, indexesInputs, inputsToThisNode}, noNodes = Length[dynamic]; oneNetOutput = List[]; For[n = 1, n <= noNodes, n++, indexesInputs = Flatten[Position[cm[[n]], 1]]; inputsToThisNode = Part[input, indexesInputs]; Which[dynamic[[n]] === "AND", AppendTo[oneNetOutput, myAnd[inputsToThisNode]], dynamic[[n]] === "OR", AppendTo[oneNetOutput, myOr[inputsToThisNode]], dynamic[[n]] === "XOR", AppendTo[oneNetOutput, myXor[inputsToThisNode]], True, AppendTo[oneNetOutput, 0]]]; oneNetOutput]
SelfTestRun[] := Module[{cm, dynamic, inputs, outputs, base, figbase, plot}, cm = {{0, 1}, {1, 0}}; dynamic = {"AND", "XOR"}; base = FileNameJoin[{"results", "selftest"}]; figbase = FileNameJoin[{"figures", "selftest"}]; If[!DirectoryQ[base], CreateDirectory[base, CreateIntermediateDirectories -> True]]; If[!DirectoryQ[figbase], CreateDirectory[figbase, CreateIntermediateDirectories -> True]]; inputs = allPosibleInputsReverse[Length[dynamic]]; outputs = runNetwork[cm, dynamic, #] & /@ inputs; Export[FileNameJoin[{base, "SelfTest-Inputs.csv"}], inputs, "CSV"]; Export[FileNameJoin[{base, "SelfTest-Outputs.csv"}], outputs, "CSV"]; Export[FileNameJoin[{base, "SelfTest-Outputs.json"}], outputs, "JSON"]; plot = ListPlot[outputs, PlotMarkers -> Automatic, AxesLabel -> {"t", "out"}]; Export[FileNameJoin[{figbase, "SelfTest-Plot.png"}], plot, "PNG"]; Association["Inputs" -> inputs, "Outputs" -> outputs, "ResultsPath" -> base, "FiguresPath" -> figbase]]